This page is intended to assemble a short introduction to the necessary principles of optics that allow you to understand how a SPIM works. This should also help when building, modifying or aligning a SPIM.

== Theoretical basics ==
''This chapter will assemble some simple optical principles that should help you to align a SPIM. Most of these rules are approximations, that are typically well fulfilled for small angles. If you want a more thorough introuction, look into any optics textbook.''
=== Mirrors ===
Mirrors are shiny surfaces that reflect a beam of light. The reflection is defined by the reflection law, which states the angle of the incident and the surface normal &alpha;<sub>i</sub> equals the angle &alpha;<sub>e</sub> of the exiting beam and the surface normal. This situation is illustrated in the next figure.
<center>[[File:Spimoptics mirror.png]]</center>

=== Lenses and parallel light ===
[https://en.wikipedia.org/wiki/Lens_%28optics%29 Lenses] are curved glass surfaces that refract the light and focus a beam of parallel light onto a spot, called the focus F. The distance between the lens and the focus is called focal length ''f''.
<center>[[File:Spimoptics lens.png]]</center>
If the parallel light beam enters the lens under an angle &phi;, as in the image below, the focus F will be shifted perpendcular to the optical axis by a distance ''&Delta;x'' (Note: A shift on a flat plane is the ideal case, which is nearly true for small shifts. For real lenses and larger shifts the shifted focus will move on a sphere centered in the center of the lens). The shift is given by a simple relation:
::'''''&Delta;x = f&middot;''tan''(&phi;)'''''
<center>[[File:Spimoptics lensangled.png]]</center>
Another basic rule of optics states that:
:'''Every beam path in an optical setup is reversible.'''
This means, e.g. for a lens, that it may either focus parallel light into a single spot, or alternatively collimate the light from a point source, which is put into the focus. In the latter case the situation above is simply reversed (i.e. flip the image horicontally):
<center>[[File:Spimoptics lensreversed.png]]</center>
Shifting the lightsource then also changes the angle &phi; under which the light leaves the lens.

<small>In terms of [https://en.wikipedia.org/wiki/Fourier_optics fourier optics], this finding makes a lens a fourier transformator, as it changes from a position (space) to an angle space, or back. </small>


=== Imaging with a lens ===
In the section above, we looked at what a lens does to parallel light, or to point sources in the focal plane. These two cases are the most important ones, when it comes to understanding the optics of openSPIM. But for the sake of completeness, we will also give the "standard sketch" of imaging with a lens:
<center>[[File:Spimoptics lensimaging.png]]</center>
Here an object of height ''G'' is positioned a distance ''g'' away from a lens (focal length ''f<g''). Then a sharp image of height ''H'' is formed a distance ''h>f'' in front of the lens. For the size of the image and the distances holds the '''[https://en.wikipedia.org/wiki/Lens_%28optics%29#Imaging_properties lens formula]''' (an approximation for thin lenses!):
::''''' 1/f = 1/G + 1/H'''''
The image is [https://en.wikipedia.org/wiki/Magnification#Calculating_the_magnification_of_optical_systems magnified] by a factor ''M'':
::''''' M = h/g = H/G = f/(f-G)'''''

=== Telescopes ===
Now we combine two lenses with focal lengths ''f'' anf ''f''' to form a telescope. A telescope is an optical assembly, where the the lenses are placed a distance ''f+f''' apart. It can be used to expand or decrease the diameter of a beam of light.
<center>[[File:Spimoptics telescope.png]]</center>
As can be seen, the size of the incident parallel light beam is expanded by a factor ''M'' (magnification):
::'''''M = D' / D = f' / f '''''
This can be understood, using the principle of reversability of optical beams (see above). The focus of the first lens can be seen as a point source for the second lens. The magnification is simply given by geometry.

To calculate the exit angle &phi;' for a given incident angle &phi;, we can use the tangent law above:
::''&Delta;x=f&middot;''tan''(&phi;)=f'&middot;''tan''(&phi;')''
and therefore:
::'''tan''(&phi;')/''tan''(&phi;) = f/f' = 1/M '''''



=== Infinity Microscope ===
Now we take a second look at an assembly of two lenses, now forming an infinity microscope (which we use in the openSPIM to image the specimen onto the camera). Most of todays scientific grade fluorescence microscopes use this "infinity optics" principle:
# The fluorescing sample is placed in the focal plane of the '''[https://en.wikipedia.org/wiki/Objective_%28optics%29 objective lens]'''. Each point (fluorophore) in the sample can then be seen as a pointsource of light. The objective lens then converts the light from each of these points (at position ''x'') into a parallel beam of light, exiting the objective under different angles ''&phi;(x)''.
# A second lens (called '''tube lens''') then converts these parallel beams back into an image in its focal plane, where the camera is placed. Alteratively an [https://en.wikipedia.org/wiki/Eyepiece eyepiece] can be used as a loupe to observe this image with the eye.
The whole setup looks like this:
<center>[[File:Spimoptics infinitymicroscope.png]]</center>
The magnification ''M=x'/x'' can again be easily calculated using the tangent law for lenses, stated above. From
::''x = f<sub>O</sub>&middot;''tan''(&phi;(x))'' and ''x'= f<sub>TL</sub>&middot;''tan''(&phi;(x))''
follows that:
::'''''M = x'/x = f<sub>TL</sub>/f<sub>O</sub>'''''
Note that we never used the distance between the objective and tube lens. In fact this distance does not play a major role for the imaging in an infinity microscope <small>(If it is too long, the parallel beams expand too much and you will loose intensity in the image)</small>. 

The space between the objective and tube lens is called '''"infinity space"''', because the image is focused "in infinity" here (i.e. we have parallel beams of light). The advantage of this is, that we can easily introduce any plane optical elements (fluorescence filter, dichroic mirrors ...) without disturbing the optical properties of the microscope.

== Practical Hints ==
=== Laser Safety ===
[[Image:Laser-symbol-text.svg|thumb|Laser Symbol]]
The lasers used in openSPIMs are typically [https://en.wikipedia.org/wiki/Laser_safety#Class_3B class 3b], which means they are dangerous to the eye. This classification means that direct exposure of the eye by the laser is harmfull and will destroy your retina ("might burn a small hole/blind spot"). This is also true for any reflections from shiny surfaces (rings, bracelets, watches, belt buckles, tools, ...). Diffuse reflections, i.e. reflections from matte surfaces such as paper, anodized aluminum etc., are generally not dangerous. 

So when aligning an optical system you should follow some simple rules to increase your safety:
# You are also responsible for the safety of anybody else in the same room, so warn everybody, when you use a laser and tell them what to watch out for.
# Anybody using a laser (or in our case the openSPIM) has to get an introduction to laser safety. Make sure everybody knows what he or she is doing and what to watch out for.
# Remove any jewelry from your hands (ring, watches, bracelets, ...), best even cover your belt buckle with your clothes.
# Wear laser safety glasses (although they might be uncomfortable or at times unpracticable).
# When aligning, reduce the laser power to a safe setting (i.e. <1mW, which is generally considered safe in the visible range).
# Don't look directly into the beam or the end of an optical fiber ('' ... with your remaining eye ;-)'').
# Before entering an optical setup with a shiny tool (e.g. an spanners and wrenches) or a new optical element: block the laser and/or make sure you cannot be hit by a stray beam.
# Keep the optical beams in one plane (and predictable ... see next paragraph), which makes it easy to shield them off.
# If possible, lead the laser beams inside an enlosure.
# The lasers have to be marked with the appropriate [https://en.wikipedia.org/wiki/Laser_safety#Class_3B warning signs]. Also the room should be marked outside with a warning sign and at least this information: (max.) laser class, laser wavelength, laser power.
# Note that in some countries (e.g. germany) you need a laser safety officier in your university/company/institute/... when operating lasers of classes 3R, 3B and 4. Otherwise there might be no insurance against accidents with laser radiataion. Find out who that is and show him your setup.


'''Disclaimer:''' This list of rules is in no way complete or guarantees that nobody gets harmed! But following them should prevent most accidents.

=== Beam plane ===
'''Typically all optical beams of a setup should be in one plane parallel to the table top.'''

This principle makes the whole setup predictable and safe, as everybody always knows where to expect (possibly dangerous) light. Also it makes it easier to install laser shielding (e.g. a wall around the setup). 

A simple means to achieve this goal is by defining the beam height before starting to build the setup. This can be done by mounting an iris or alignment disc with its hole on the desired beam hight. Then this tool can be used for any further alignment.

=== Kinematic mirror mounts ===
[[File:Spimoptics kinematicmirrormount.png|thumb|300px|kinemtic mirror mount]]
The mirrors in the openSPIM are all mounted in kinematic mirror mounts. These mounts allow to flap the mirror around two perpendicular axes:
# Moving knob SB will flap the mirror around the axis defined by knobs ST and SC. This will move the beam left/right (green line).
# Moving knob ST will flap the mirror around the axis defined by knobs SB and SC. This will move the beam up/down (blue line).
# The mirror may be shifted, if all knobs are moved (bottom right in figure).
'''Note''' that with these mirror mounts the rotation axis of the mirror is NOT IN THE CENTER of the mirror. So flapping a mirror will always lead to a parallel shift of the reflected beam, as the reflection point moves (see bottom left figure).
Due to the size of the mirror mount the shift of the reflection point is typically not very large and can be mostly neglected.

=== Aligning a laser beam in space ===
[[File:Spimoptics alignmentinspace.png|thumb|400px|alignment of a laser beam in space]]
Each laser beam (in space) is defined by four free parameters (a osition x,y on a plane in space and a direction defined by two angles). This can be seen in the figure (A) on the right, where all beams hit the same point on a plane (2), but only the green beam is parallel to the z-axis. So to align a laser beam in space (e.g. parallel to an optical rail, as in the openSPIM), it needs to go through two points in space (e.g. two alignment discs or irises).

Figure (B) on the right shows a typical setup to align a laser beam in space. It uses two mirrors M1 and M2 (on kinematic mounts, i.e. with two degrees of freedom each) and two alignment dics or irises (targets T1 and T2). In the openSPIM this appears e.g. with the two mirrors directly behind the laser, which allow to align the beam parallel to the optical rails. To align the beam, follow these steps:
# Roughly align the mirrors, so the beam is not too far from its ideal position.
# Align mirror M1, so the mirror passes T1. Now it will maybe NOT pass T2
# Use mirror M2 to make the beam hit T2 (which might make the beam miss T1). If you uses irises, open up iris T1, so the beam passes until T2.
# Return to step 2 and iterate this process until the beam passes thorugh the centers of T1 and T2.
The crucial point here is to use the first mirror to align on the first target and the second mirror for the second target.


=== Estimating the focal length of a lens ===
There is an easy way to estimate the focal length of a lens. You will need a far away lightsource (e.g. a lamp at the other end of the room) and a white wall or sheet of paper. 
# Hold the lens a short distance in front of the paper or wall and change the distance until you see a sharp image of the lightsource. 
# Now measure the distance between the lens and the screen. This distance will roughly equal the focal length. The estimate is the better, the smaller the focal length is, compared to the distance to the light source.

This page just explains how to build the software needed for OpenSPIM. For an overview of the source code, please have a look at [[Overview_of_the_source_code|this page]].

= QuickStart =

<span style='color:red;'>First, make sure you have your camera driver installed!</span>

If you have access to the OpenSPIM DropBox, just download & run the [https://dl-web.dropbox.com/get/Software&Drivers/Windows/32%20bit/OpenSPIM%20development%20environment/msysGit-netinstall-openspim.exe OpenSPIM development environment installer]. This will set up everything you need and perform the initial build.

If you do not have access to the DropBox, please follow the following instructions.

= Manual setup =

<span style='color:red;'>First, make sure you have your camera driver installed!</span>

== You need Git ==

First of all, you need to make sure that you have the version control software [http://git-scm.com Git] installed. If in doubt, just install [http://msysgit.github.com/ Git for Windows].

== Cloning the Micro-Manager and support sources ==

Wherever you like, e.g. in your home directory, call these commands:

# git clone git://fiji.sc/micromanager1.4 micromanager
# cd micromanager
# git checkout -t origin/openspim
# cd ..
# git clone git://fiji.sc/mmanager-3rdparty 3rdpartypublic
# cd 3rdpartypublic
# git checkout -t origin/openspim

== Building Micro-Manager ==

First, <u>make sure</u> that the environment variable ''JAVA_HOME'' is set and points to a valid JDK (you can add environment variables by right-clicking on the "Start" menu button, choosing "Open Windows Explorer", opening the context menu of "My Computer", selecting "Properties" and in the "Advanced mode" click on the "Environment variables" button. You need to restart the Visual Studio after adding the environment variable).

After installing [http://msdn.microsoft.com/en-us/express/future/bb421473 Visual Studio Express 2008], continue as described on the [http://valelab.ucsf.edu/~MM/MMwiki/index.php/Building_MM_on_Windows uManager Wiki].

= Debugging =

== Look at the CoreLog ==

Whatever you do, first have a look at the file CoreLog<date>.txt, located in the directory Micro-Manager was started from (this is not necessarily the directory where it is installed, beware!).

== When Micro-Manager does not list the driver ==

# Make sure the .dll is present in ''dist/mm/Win32/''
# Use the [http://www.dependencywalker.com/ Dependency Walker] to detect missing dependencies

== Micro-Manager just crashes when I connect <device> ==

Micro-Manager's memory management is not very safe on the driver side. Try to start Fiji with less memory reserved for Java, e.g. ''--mem=512m''.

If that does not help, try to find out what's in [[#Look at the CoreLog]], and if that fails, too, you might have more luck [[#Using Visual Studio's interactive debugger]].

== Using Visual Studio's interactive debugger ==

Start Fiji, and before starting Micro-Manager use Visual Studio's ''Debug>Attach to Process...'' to attach to the process. After that, you may set breakpoints (optional) and then start Micro-Manager in Fiji.

== Using Eclipse to debug MicroManager/SPIM Acquisition ==

# Make sure you have Eclipse installed.
# Add Fiji's JRE to Eclipse: 
## Window -> Preferences; under Java, select Installed JREs and click Add...
### Use Standard VM.
### Set the JRE Home to fiji/java/<your OS>/jdk1.6.0_24 (or similar). Eclipse should fill in the rest.
### Click Finish.
## Check the checkbox next to the newly-added JRE.
# Create a new project for Micro-Manager Studio:
## File -> New -> Java Project...
### Uncheck "Use Default Location"
### Point Location to fiji/3rdparty/micromanager/mmstudio
### Eclipse should auto-configure all sorts of useful things.
## Click Next.
### On the Libraries tab, click Add External JARs...
#### From fiji/3rdparty/micromanager/dist/jars:
####* bsh.jar
####* commons-math-2.0.jar
####* ij.jar
####* MMCoreJ.jar
####* MMAcqEngine.jar
####* swing-layout-1.0.4.jar
####* swingx-0.9.5.jar
## Click Finish.
# Create a project for SPIMAcquisition:
## File -> New -> Java Project...
### Uncheck "Use Default Location"
### Point Location to fiji/3rdparty/micromanager/plugins/SPIMAcquisition
### Let Eclipse auto-configure things.
## Click Next.
### On the Projects tab, click Add... and select the mmstudio project added above.
### On the Libraries tab, click Add External JARs...
#### From fiji/3rdparty/micromanager/dist/jars:
####* ij.jar
####* MMCoreJ.jar
## Click Finish.

[[Category:Software]]
